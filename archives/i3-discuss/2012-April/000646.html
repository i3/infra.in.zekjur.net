<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [i3] IPC interface - reply format change for command message	type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:i3-discuss%40i3.zekjur.net?Subject=Re%3A%20%5Bi3%5D%20IPC%20interface%20-%20reply%20format%20change%20for%20command%20message%0A%09type&In-Reply-To=%3C20120427141018.27223.4214%40midna.zekjur.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000645.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[i3] IPC interface - reply format change for command message	type</H1>
    <B>Michael Stapelberg</B> 
    <A HREF="mailto:i3-discuss%40i3.zekjur.net?Subject=Re%3A%20%5Bi3%5D%20IPC%20interface%20-%20reply%20format%20change%20for%20command%20message%0A%09type&In-Reply-To=%3C20120427141018.27223.4214%40midna.zekjur.net%3E"
       TITLE="[i3] IPC interface - reply format change for command message	type">michael at i3wm.org
       </A><BR>
    <I>Fri Apr 27 16:10:18 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000645.html">[i3] IPC interface - reply format change for command message type
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#646">[ date ]</a>
              <a href="thread.html#646">[ thread ]</a>
              <a href="subject.html#646">[ subject ]</a>
              <a href="author.html#646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Jure,

Quoting Jure &#381;iberna (2012-04-27 15:42:17)
&gt;<i> I've noticed that the reply format for command messages has changed in 4.2-1.
</I>&gt;<i> It now returns a list with a dictionary as its only element instead of just a
</I>&gt;<i> dictionary and empty list for non-existent commands instead of a dictionary
</I>&gt;<i> with error message under 'error' key. I've tested this with i3-msg and also
</I>&gt;<i> with sockets in Python (i3-py).
</I>For non-existent commands, we should communicate an error. This was an
oversight and will be corrected. Please open a ticket for that.

&gt;<i> Was this intentional or is it going to change back to how it was before? (I
</I>&gt;<i> can't find the commit where this was changed.) In my opinion the previous reply
</I>&gt;<i> format was more valuable.
</I>The new command reply format is intentional and will not change back. Please
note that before 4.2, commands officially had no reply (the documentation was
changed in commit 1f0c0cdd). The reply change was done in commit e114b3dba. The
reason for an array of return values is that you can chain commands like &quot;focus
left; focus down&quot;. You are actually running two commands and therefore deserve
to get two return values. To keep things simple, we don&#8217;t just return one JSON
object if you run a single command and an JSON array if you run multiple.
Instead, we just always return an JSON array with &gt;= 1 entries.

Best regards,
Michael
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000645.html">[i3] IPC interface - reply format change for command message type
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#646">[ date ]</a>
              <a href="thread.html#646">[ thread ]</a>
              <a href="subject.html#646">[ subject ]</a>
              <a href="author.html#646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">More information about the i3-discuss
mailing list</a><br>
</body></html>
