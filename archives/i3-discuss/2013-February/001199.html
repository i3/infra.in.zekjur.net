<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [i3] Fwd:  Building the latest i3 on RHEL 6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:i3-discuss%40i3.zekjur.net?Subject=Re%3A%20%5Bi3%5D%20Fwd%3A%20%20Building%20the%20latest%20i3%20on%20RHEL%206&In-Reply-To=%3CCAHyBj%3D_n%2B2um1kFmRTQs92kux7ZBFrEKU6mEJ9t8K%3Des0ZG8Gg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001198.html">
   <LINK REL="Next"  HREF="001200.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[i3] Fwd:  Building the latest i3 on RHEL 6</H1>
    <B>Dustin Jerome</B> 
    <A HREF="mailto:i3-discuss%40i3.zekjur.net?Subject=Re%3A%20%5Bi3%5D%20Fwd%3A%20%20Building%20the%20latest%20i3%20on%20RHEL%206&In-Reply-To=%3CCAHyBj%3D_n%2B2um1kFmRTQs92kux7ZBFrEKU6mEJ9t8K%3Des0ZG8Gg%40mail.gmail.com%3E"
       TITLE="[i3] Fwd:  Building the latest i3 on RHEL 6">dustyjerome at gmail.com
       </A><BR>
    <I>Wed Feb 27 22:06:05 CET 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="001198.html">[i3] Building the latest i3 on RHEL 6
</A></li>
        <LI>Next message: <A HREF="001200.html">[i3] Fwd:  Building the latest i3 on RHEL 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1199">[ date ]</a>
              <a href="thread.html#1199">[ thread ]</a>
              <a href="subject.html#1199">[ subject ]</a>
              <a href="author.html#1199">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Apologies, accidentally sent this to only Michael. Re-sending to list.

---------- Forwarded message ----------
From: Dustin Jerome &lt;<A HREF="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">dustyjerome at gmail.com</A>&gt;
Date: Wed, Feb 27, 2013 at 2:49 PM
Subject: Re: [i3] Building the latest i3 on RHEL 6
To: Michael Stapelberg &lt;<A HREF="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">michael at i3wm.org</A>&gt;


Michael,

You, sir, are a genius.

I ran &quot;git submodule update --init&quot; and was able to compile and install
xcb-util.

For those of you who may find this thread and are in a similar situation to
me, after installing xcb-util I started getting these errors:

$ make
[i3] CC src/con.c
[i3] CC src/config.c
[i3] CC src/config_directives.c
[i3] Generating config parser
[i3] CC src/config_parser.c
[i3] CC src/debug.c
[i3] CC src/display_version.c
[i3] CC src/ewmh.c
[i3] CC src/fake_outputs.c
[i3] CC src/floating.c
[i3] CC src/handlers.c
../i3/src/handlers.c: In function &#8216;handle_normal_hints&#8217;:
../i3/src/handlers.c:721: warning: implicit declaration of function
&#8216;xcb_icccm_get_wm_size_hints_from_reply&#8217;
../i3/src/handlers.c:723: warning: implicit declaration of function
&#8216;xcb_icccm_get_wm_normal_hints_reply&#8217;
../i3/src/handlers.c:723: warning: implicit declaration of function
&#8216;xcb_icccm_get_wm_normal_hints_unchecked&#8217;
../i3/src/handlers.c:725: error: &#8216;XCB_ICCCM_SIZE_HINT_P_MIN_SIZE&#8217;
undeclared (first use in this function)
../i3/src/handlers.c:725: error: (Each undeclared identifier is reported
only once
../i3/src/handlers.c:725: error: for each function it appears in.)
../i3/src/handlers.c:731: error: &#8216;XCB_ICCCM_SIZE_HINT_P_RESIZE_INC&#8217;
undeclared (first use in this function)
../i3/src/handlers.c:752: error: &#8216;XCB_ICCCM_SIZE_HINT_BASE_SIZE&#8217; undeclared
(first use in this function)
../i3/src/handlers.c:771: error: &#8216;XCB_ICCCM_SIZE_HINT_P_ASPECT&#8217; undeclared
(first use in this function)
../i3/src/handlers.c: In function &#8216;handle_hints&#8217;:
../i3/src/handlers.c:827: error: &#8216;xcb_icccm_wm_hints_t&#8217; undeclared (first
use in this function)
../i3/src/handlers.c:827: error: expected &#8216;;&#8217; before &#8216;hints&#8217;
../i3/src/handlers.c:830: warning: implicit declaration of function
&#8216;xcb_icccm_get_wm_hints&#8217;
../i3/src/handlers.c:830: error: incompatible type for argument 2 of
&#8216;xcb_get_property_reply&#8217;
/usr/local/include/xcb/xproto.h:7980: note: expected
&#8216;xcb_get_property_cookie_t&#8217; but argument is of type &#8216;int&#8217;
../i3/src/handlers.c:833: warning: implicit declaration of function
&#8216;xcb_icccm_get_wm_hints_from_reply&#8217;
../i3/src/handlers.c:833: error: &#8216;hints&#8217; undeclared (first use in this
function)
../i3/src/handlers.c:844: warning: implicit declaration of function
&#8216;xcb_icccm_wm_hints_get_urgency&#8217;
make: *** [src/handlers.o] Error 1

which turned out to be xcb-icccm issues which I got around by installing
xcb-util-wm. xcb-icccm apparently is split between xcb-util and xcb-util-wm
(seems odd to me).

And for my latest error (sorry to keep bugging you!):

$ make
[libi3] CC libi3/fake_configure_notify.c
[libi3] CC libi3/font.c
[libi3] CC libi3/get_colorpixel.c
[libi3] CC libi3/get_mod_mask.c
[libi3] CC libi3/get_visualtype.c
[libi3] CC libi3/ipc_connect.c
[libi3] CC libi3/ipc_recv_message.c
[libi3] CC libi3/ipc_send_message.c
[libi3] CC libi3/is_debug_build.c
[libi3] CC libi3/root_atom_contents.c
[libi3] CC libi3/safewrappers.c
[libi3] CC libi3/string.c
[libi3] CC libi3/strndup.c
[libi3] CC libi3/ucs2_conversion.c
[libi3] AR libi3.a
[i3] YACC src/cfgparse.y
[i3] CC src/cfgparse.tab.c
[i3] LEX src/cfgparse.l
[i3] CC src/cfgparse.yy.c
[i3] CC src/assignments.c
[i3] CC src/click.c
[i3] CC src/commands.c
[i3] Generating command parser
[i3] CC src/commands_parser.c
[i3] CC src/con.c
[i3] CC src/config.c
[i3] CC src/config_directives.c
[i3] Generating config parser
[i3] CC src/config_parser.c
[i3] CC src/debug.c
[i3] CC src/display_version.c
[i3] CC src/ewmh.c
[i3] CC src/fake_outputs.c
[i3] CC src/floating.c
[i3] CC src/handlers.c
[i3] CC src/ipc.c
[i3] CC src/key_press.c
[i3] CC src/load_layout.c
[i3] CC src/log.c
[i3] CC src/main.c
[i3] CC src/manage.c
[i3] CC src/match.c
[i3] CC src/move.c
[i3] CC src/output.c
[i3] CC src/randr.c
[i3] CC src/regex.c
[i3] CC src/render.c
[i3] CC src/resize.c
[i3] CC src/scratchpad.c
[i3] CC src/sd-daemon.c
[i3] CC src/sighandler.c
[i3] CC src/startup.c
[i3] CC src/tree.c
[i3] CC src/util.c
[i3] CC src/window.c
[i3] CC src/workspace.c
[i3] CC src/x.c
[i3] CC src/xcb.c
[i3] CC src/xcursor.c
[i3] CC src/xinerama.c
[i3] Link i3
/user/djerome/pkg/i3/libi3.a(font.o): In function `load_pango_font':
/user/djerome/pkg/i3/libi3/font.c:57: undefined reference to
`cairo_xcb_surface_create'
/user/djerome/pkg/i3/libi3.a(font.o): In function `draw_text_pango':
/user/djerome/pkg/i3/libi3/font.c:85: undefined reference to
`cairo_xcb_surface_create'
/user/djerome/pkg/i3/libi3.a(font.o): In function
`predict_text_width_pango':
/user/djerome/pkg/i3/libi3/font.c:114: undefined reference to
`cairo_xcb_surface_create'
collect2: ld returned 1 exit status
make: *** [i3] Error 1

I then went to lunch, and when I got back I decided to &quot;make clean;make
distclean;make&quot; and this error went away. When I tried &quot;sudo make install&quot;
it came back...!!!:

$ sudo make install
[sudo] password for djerome:
[i3] Install
[i3-config-wizard] YACC i3-config-wizard/cfgparse.y
[i3-config-wizard] CC i3-config-wizard/cfgparse.tab.c
[i3-config-wizard] LEX i3-config-wizard/cfgparse.l
[i3-config-wizard] CC i3-config-wizard/cfgparse.yy.c
[i3-config-wizard] Link i3-config-wizard
/user/djerome/pkg/i3/libi3.a(font.o): In function `load_pango_font':
/user/djerome/pkg/i3/libi3/font.c:57: undefined reference to
`cairo_xcb_surface_create'
/user/djerome/pkg/i3/libi3.a(font.o): In function `draw_text_pango':
/user/djerome/pkg/i3/libi3/font.c:85: undefined reference to
`cairo_xcb_surface_create'
/user/djerome/pkg/i3/libi3.a(font.o): In function
`predict_text_width_pango':
/user/djerome/pkg/i3/libi3/font.c:114: undefined reference to
`cairo_xcb_surface_create'
collect2: ld returned 1 exit status
make: *** [i3-config-wizard/i3-config-wizard] Error 1

I am currently attempting to rebuild pango in /opt/pango, but it
continuously tells me that while it finds cairo, it reports that there are
no backends that can be used (even though everything else seems to see
cairo-xcb just fine):

$ ./autogen.sh --prefix=/opt/pango
.
.
.
checking for CoreText availability... no
checking for CAIRO... yes
checking which cairo font backends could be used... none
configure: Disabling cairo support
configure: error: *** Could not enable any backends.
*** Must have at least one backend to build Pango.

$ echo $PKG_CONFIG_PATH
/opt/cairo-with-xcb/lib/pkgconfig/:/opt/pixman/lib/pkgconfig/:/opt/xcb-proto/lib/pkgconfig/:/opt/libxcb/lib/pkgconfig/
$ pkg-config --modversion cairo
1.12.15

I've also tried setting CAIRO_LIBS:

$ echo $CAIRO_LIBS
/opt/cairo-with-xcb/lib

to no avail.

Any ideas? :(


On Wed, Feb 27, 2013 at 11:07 AM, Michael Stapelberg &lt;<A HREF="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">michael at i3wm.org</A>&gt;wrote:

&gt;<i> Hi Dustin,
</I>&gt;<i>
</I>&gt;<i> Dustin Jerome &lt;<A HREF="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">dustyjerome at gmail.com</A>&gt; writes:
</I>&gt;<i> &gt; $ ./autogen.sh
</I>&gt;<i> &gt; autoreconf: Entering directory `.'
</I>&gt;<i> &gt; autoreconf: configure.ac: not using Gettext
</I>&gt;<i> &gt; autoreconf: running: aclocal -I m4
</I>&gt;<i> &gt; autoreconf: configure.ac: tracing
</I>&gt;<i> &gt; autoreconf: configure.ac: not using Libtool
</I>&gt;<i> &gt; autoreconf: running: /usr/bin/autoconf
</I>&gt;<i> &gt; autoreconf: configure.ac: not using Autoheader
</I>&gt;<i> &gt; autoreconf: running: automake --add-missing --copy --no-force
</I>&gt;<i> &gt; src/Makefile.am:1: Libtool library used but `LIBTOOL' is undefined
</I>&gt;<i> &gt; src/Makefile.am:1:   The usual way to define `LIBTOOL' is to add
</I>&gt;<i> &gt; `AC_PROG_LIBTOOL'
</I>&gt;<i> &gt; src/Makefile.am:1:   to `configure.ac' and run `aclocal' and `autoconf'
</I>&gt;<i> &gt; again.
</I>&gt;<i> &gt; src/Makefile.am:1:   If `AC_PROG_LIBTOOL' is in `configure.ac', make
</I>&gt;<i> sure
</I>&gt;<i> &gt; src/Makefile.am:1:   its definition is in aclocal's search path.
</I>&gt;<i> &gt; src/Makefile.am:13: `xcbinclude_HEADERS' is used but `xcbincludedir' is
</I>&gt;<i> &gt; undefined
</I>&gt;<i> &gt; Makefile.am:5: `pkgconfig_DATA' is used but `pkgconfigdir' is undefined
</I>&gt;<i> &gt; autoreconf: automake failed with exit status: 1
</I>&gt;<i> Run &#8220;git submodule update --init&#8221;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Best regards,
</I>&gt;<i> Michael
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://infra.in.zekjur.net/pipermail/i3-discuss/attachments/20130227/624b7bc9/attachment-0001.html">http://infra.in.zekjur.net/pipermail/i3-discuss/attachments/20130227/624b7bc9/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001198.html">[i3] Building the latest i3 on RHEL 6
</A></li>
	<LI>Next message: <A HREF="001200.html">[i3] Fwd:  Building the latest i3 on RHEL 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1199">[ date ]</a>
              <a href="thread.html#1199">[ thread ]</a>
              <a href="subject.html#1199">[ subject ]</a>
              <a href="author.html#1199">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">More information about the i3-discuss
mailing list</a><br>
</body></html>
