<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;When&nbsp;this&nbsp;situation&nbsp;happens:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&nbsp;Does&nbsp;running&nbsp;xev(1)&nbsp;still&nbsp;show&nbsp;keyboard&nbsp;events?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2.&nbsp;Does&nbsp;using&nbsp;setxkbmap&nbsp;to&nbsp;set&nbsp;your&nbsp;layout&nbsp;make&nbsp;the&nbsp;problem&nbsp;go&nbsp;away?&nbsp;That&nbsp;should&nbsp;force&nbsp;i3&nbsp;to&nbsp;re-grab&nbsp;all&nbsp;keys.&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Oct&nbsp;30,&nbsp;2015&nbsp;at&nbsp;12:38&nbsp;PM,&nbsp;Benjamin&nbsp;Kaiser&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:benjaminjkaiser@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;benjaminjkaiser@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;ve&nbsp;got&nbsp;a&nbsp;really&nbsp;weird&nbsp;issue&nbsp;that&#39;s&nbsp;been&nbsp;bothering&nbsp;me&nbsp;for&nbsp;perhaps&nbsp;the&nbsp;last&nbsp;6&nbsp;months&nbsp;(before&nbsp;then&nbsp;it&nbsp;worked&nbsp;fine,&nbsp;perhaps&nbsp;could&nbsp;have&nbsp;been&nbsp;around&nbsp;when&nbsp;I&nbsp;switched&nbsp;to&nbsp;using&nbsp;my&nbsp;keyboard&nbsp;to&nbsp;suspend).&nbsp;Sometimes&nbsp;when&nbsp;I&nbsp;resume&nbsp;from&nbsp;suspend&nbsp;(I&nbsp;have&nbsp;i3lock&nbsp;launching&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;as&nbsp;when&nbsp;I&nbsp;suspend)&nbsp;I&nbsp;can&nbsp;unlock&nbsp;my&nbsp;computer,&nbsp;but&nbsp;then&nbsp;no&nbsp;more&nbsp;keyboard&nbsp;events&nbsp;work.&nbsp;The&nbsp;keyboard&nbsp;remains&nbsp;active&nbsp;(lights&nbsp;on)&nbsp;and&nbsp;I&nbsp;can&nbsp;switch&nbsp;to&nbsp;a&nbsp;TTY,&nbsp;but&nbsp;none&nbsp;of&nbsp;the&nbsp;i3&nbsp;events&nbsp;fire.&nbsp;The&nbsp;only&nbsp;way&nbsp;I&nbsp;can&nbsp;fix&nbsp;it&nbsp;is&nbsp;to&nbsp;use&nbsp;the&nbsp;mouse&nbsp;(which&nbsp;is&nbsp;still&nbsp;working)&nbsp;to&nbsp;click&nbsp;on&nbsp;a&nbsp;workspace&nbsp;in&nbsp;the&nbsp;statusbar&nbsp;and&nbsp;then&nbsp;the&nbsp;keyboard&nbsp;responds&nbsp;again. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; As&nbsp;mentioned&nbsp;above,&nbsp;it&nbsp;only&nbsp;happens&nbsp;sometimes,&nbsp;and&nbsp;as&nbsp;a&nbsp;fellow&nbsp;dev&nbsp;it&nbsp;really&nbsp;annoys&nbsp;me&nbsp;to&nbsp;no&nbsp;end&nbsp;when&nbsp;something&nbsp;is&nbsp;unreproducible.&nbsp;Things&nbsp;I&nbsp;have&nbsp;tried&nbsp;to&nbsp;reproduce&nbsp;are&nbsp;just&nbsp;suspending,&nbsp;then&nbsp;detaching&nbsp;my&nbsp;keyboard&nbsp;and&nbsp;attaching&nbsp;it&nbsp;again&nbsp;before&nbsp;resuming&nbsp;from&nbsp;suspend,&nbsp;but&nbsp;that&nbsp;doesn&#39;t&nbsp;trigger&nbsp;the&nbsp;issue.&nbsp;Just&nbsp;about&nbsp;the&nbsp;only&nbsp;common&nbsp;thing&nbsp;I&nbsp;can&nbsp;find&nbsp;is&nbsp;time&nbsp;(after&nbsp;being&nbsp;suspended&nbsp;for&nbsp;a&nbsp;long&nbsp;time,&nbsp;12hours+,&nbsp;it&nbsp;seems&nbsp;to&nbsp;happen&nbsp;more&nbsp;frequently).&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;One&nbsp;idea&nbsp;I&#39;ve&nbsp;had&nbsp;is&nbsp;that&nbsp;because&nbsp;I&nbsp;use&nbsp;a&nbsp;keyboard&nbsp;shortcut&nbsp;to&nbsp;suspend&nbsp;(`bindsym&nbsp;--release&nbsp;$mod+Control+Shift+s&nbsp;exec&nbsp;&quot;systemctl&nbsp;suspend;&nbsp;i3lock&quot;`&nbsp;in&nbsp;my&nbsp;config,&nbsp;the&nbsp;--&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;nit:&nbsp;you&nbsp;should&nbsp;i3lock&nbsp;first,&nbsp;then&nbsp;suspend.&nbsp;That&nbsp;way,&nbsp;your&nbsp;screen&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;locked&nbsp;in&nbsp;a&nbsp;race-free&nbsp;way&nbsp;when&nbsp;you&nbsp;resume.&nbsp;“i3lock&nbsp;&amp;&amp;&nbsp;systemctl”&nbsp;suspend&nbsp;should&nbsp;work.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;release&nbsp;was&nbsp;me&nbsp;weeks&nbsp;ago&nbsp;trying&nbsp;to&nbsp;rectify&nbsp;the&nbsp;issue,&nbsp;but&nbsp;it&nbsp;still&nbsp;persisted)&nbsp;i3wm&nbsp;is&nbsp;somehow&nbsp;holding&nbsp;onto&nbsp;the&nbsp;keyboard&nbsp;before&nbsp;flushing,&nbsp;but&nbsp;then&nbsp;post-suspend,&nbsp;i3lock&nbsp;takes&nbsp;the&nbsp;keyboards&nbsp;focus,&nbsp;i3wm&nbsp;holds&nbsp;onto&nbsp;an&nbsp;old&nbsp;un-flushed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;keyboard&nbsp;(not&nbsp;sure&nbsp;if&nbsp;that&nbsp;is&nbsp;how&nbsp;that&nbsp;works)&nbsp;and&nbsp;doesn&#39;t&nbsp;refresh&nbsp;it&nbsp;upon&nbsp;i3lock&nbsp;giving&nbsp;up&nbsp;focus.&lt;br&gt;From&nbsp;searching&nbsp;around&nbsp;in&nbsp;the&nbsp;i3&nbsp;source&nbsp;code,&nbsp;seeing&nbsp;the&nbsp;line&nbsp;in&nbsp;main.c:main()&nbsp;with&nbsp;the&nbsp;comment&nbsp;annotation&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp;/*&nbsp;Grab&nbsp;the&nbsp;keyboard&nbsp;to&nbsp;get&nbsp;all&nbsp;input&nbsp;*/&lt;/div&gt; &nbsp; &nbsp;xcb_flush(conn);&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;that&nbsp;function&nbsp;also&nbsp;occuring&nbsp;in&nbsp;click.c:route_click()&nbsp;(i.e.&nbsp;when&nbsp;I&nbsp;click&nbsp;the&nbsp;workspaces&nbsp;in&nbsp;the&nbsp;status&nbsp;bar)&lt;br&gt;&lt;div&gt; &nbsp; &nbsp;xcb_flush(conn);&lt;/div&gt;&lt;div&gt;Maybe&nbsp;this&nbsp;is&nbsp;what&nbsp;is&nbsp;allowing&nbsp;the&nbsp;keyboard&nbsp;to&nbsp;work&nbsp;again.&nbsp;Is&nbsp;there&nbsp;some&nbsp;way&nbsp;this&nbsp;could&nbsp;be&nbsp;run&nbsp;upon&nbsp;i3lock&nbsp;giving&nbsp;up&nbsp;focus&nbsp;/&nbsp;i3wm&nbsp;resuming&nbsp;focus?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;help&nbsp;in&nbsp;solving&nbsp;this&nbsp;would&nbsp;be&nbsp;much&nbsp;appreciated!&lt;/div&gt;&lt;br&gt;Here&nbsp;is&nbsp;some&nbsp;information&nbsp;about&nbsp;my&nbsp;system:&lt;/div&gt;&lt;div&gt;Mouse:&nbsp;Razer&nbsp;Naga,&nbsp;(one&nbsp;with&nbsp;12&nbsp;buttons&nbsp;on&nbsp;side)&lt;/div&gt;&lt;div&gt;Keyboard:&nbsp;ducky&nbsp;shine&nbsp;3&nbsp;with&nbsp;mini&nbsp;usb&nbsp;cable&nbsp;for&nbsp;connection&nbsp;(issue&nbsp;has&nbsp;occurred&nbsp;on&nbsp;my&nbsp;laptops&nbsp;internal&nbsp;keyboard&nbsp;also&nbsp;though)&lt;/div&gt;&lt;div&gt;Distro:&nbsp;Arch&nbsp;Linux&lt;/div&gt;&lt;div&gt;i3&nbsp;Version:&nbsp;4.11&lt;/div&gt;&lt;div&gt;Kernel&nbsp;version: 4.2.3-1-ARCH&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;Ben&nbsp;Kaiser&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;Best&nbsp;regards,&lt;br&gt;Michael&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
