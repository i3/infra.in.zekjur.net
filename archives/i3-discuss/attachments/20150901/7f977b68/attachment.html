<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Yes,&nbsp;the&nbsp;&quot;terminal&quot;&nbsp;role&nbsp;is&nbsp;a-okay. &nbsp;For&nbsp;example&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:40px&quot;&gt;for_window&nbsp;[window_role=&quot;terminal&quot;] &nbsp;border&nbsp;pixel&nbsp;22&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;works&nbsp;fine. &nbsp;And&nbsp;the&nbsp;dbus-send&nbsp;command&nbsp;also&nbsp;works&nbsp;if&nbsp;it&#39;s&nbsp;run&nbsp;from&nbsp;the&nbsp;terminal. &nbsp;But&lt;br&gt;&lt;/div&gt;if&nbsp;I&nbsp;start&nbsp;a&nbsp;new&nbsp;terminal&nbsp;with&nbsp;$mod+Enter,&nbsp;it&nbsp;comes&nbsp;up&nbsp;with&nbsp;the&nbsp;wrong&nbsp;layout.&lt;br&gt;&lt;br&gt;&lt;/div&gt;For&nbsp;testing,&nbsp;I&nbsp;did&nbsp;this&nbsp;(the&nbsp;same&nbsp;dbus-send&nbsp;command&nbsp;bound&nbsp;to&nbsp;$mod+o):&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:40px&quot;&gt;bindsym&nbsp;$mod+o&nbsp;exec&nbsp;--no-startup-id&nbsp;dbus-send&nbsp;--dest=ru.gentoo.KbddService&nbsp;/ru/gentoo/KbddService&nbsp;ru.gentoo.kbdd.set_layout&nbsp;uint32:1&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;pressing&nbsp;$mod+o&nbsp;in&nbsp;the&nbsp;new&nbsp;terminal&nbsp;changes&nbsp;the&nbsp;layout&nbsp;to&nbsp;US,&nbsp;as&nbsp;I&nbsp;expected.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;guess&nbsp;is&nbsp;that&nbsp;the&nbsp;switching&nbsp;to&nbsp;the&nbsp;US&nbsp;layout&nbsp;happens&nbsp;too&nbsp;early. &nbsp;Maybe&nbsp;kbdd&nbsp;kicks&nbsp;in&nbsp;on&nbsp;the&lt;br&gt;new&nbsp;window&nbsp;just&nbsp;a&nbsp;bit&nbsp;after&nbsp;the&nbsp;US&nbsp;layout&nbsp;was&nbsp;set&nbsp;and&nbsp;kbdd&nbsp;overwrites&nbsp;it&nbsp;with&nbsp;the&nbsp;default.&lt;br&gt;&lt;br&gt;&lt;br&gt;This&nbsp;didn&#39;t&nbsp;work&nbsp;either:&lt;br&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:40px&quot;&gt;xte&nbsp;&#39;keydown&nbsp;Shift_L&#39;&nbsp;&#39;keydown&nbsp;Caps_Lock&#39;&nbsp;&#39;keyup&nbsp;Caps_Lock&#39;&nbsp;&#39;keyup&nbsp;Shift_L&#39;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;but&nbsp;this&nbsp;one&nbsp;(that&nbsp;sleeps&nbsp;0.5&nbsp;sec&nbsp;before&nbsp;simulating&nbsp;the&nbsp;keypresses)&nbsp;did:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;style=&quot;margin-left:40px&quot;&gt;xte&nbsp;&#39;usleep&nbsp;500000&#39;&nbsp;&#39;keydown&nbsp;Shift_L&#39;&nbsp;&#39;keydown&nbsp;Caps_Lock&#39;&nbsp;&#39;keyup&nbsp;Caps_Lock&#39;&nbsp;&#39;keyup&nbsp;Shift_L&#39;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So,&nbsp;this&nbsp;seems&nbsp;to&nbsp;be&nbsp;some&nbsp;stupied&nbsp;timing&nbsp;issue. &nbsp;I&#39;m&nbsp;sorry&nbsp;about&nbsp;bothering...&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Uz.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Sep&nbsp;1,&nbsp;2015&nbsp;at&nbsp;5:23&nbsp;PM,&nbsp;Ingo&nbsp;Bürk&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:admin@airblader.de&quot;&nbsp;target=&quot;_blank&quot;&gt;admin@airblader.de&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Then&nbsp;I&nbsp;think&nbsp;it&nbsp;should&nbsp;work,&nbsp;assuming&nbsp;your&nbsp;terminal&nbsp;actually&nbsp;has&nbsp;the&nbsp;window&nbsp;role&nbsp;&quot;terminal&quot;.&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Can&nbsp;you&nbsp;be&nbsp;more&nbsp;specific&nbsp;on&nbsp;how&nbsp;it&nbsp;doesn&#39;t&nbsp;work?&nbsp;Can&nbsp;you&nbsp;figure&nbsp;out&nbsp;if&nbsp;the&nbsp;command&nbsp;is&nbsp;run&nbsp;on&nbsp;the&nbsp;wrong&nbsp;window?&nbsp;Also,&nbsp;a&nbsp;log&nbsp;file&nbsp;would&nbsp;be&nbsp;helpful&nbsp;to&nbsp;see&nbsp;how&nbsp;the&nbsp;command&nbsp;is&nbsp;being&nbsp;executed.&nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;You&nbsp;probably&nbsp;also&nbsp;want&nbsp;to&nbsp;add&nbsp;--no-startup-id&nbsp;to&nbsp;the&nbsp;exec&nbsp;call.&nbsp;I&nbsp;doubt&nbsp;dbus-send&nbsp;does&nbsp;anything&nbsp;with&nbsp;startup&nbsp;notifications.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/p&gt;&lt;span&nbsp;class=&quot;&quot;&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Regards&lt;br&gt;<br>
Ingo&nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Sent&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://www.typeapp.com/r&quot;&nbsp;target=&quot;_blank&quot;&gt;TypeMail&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;/span&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sep&nbsp;1,&nbsp;2015,&nbsp;at&nbsp;17:19,&nbsp;Nokan&nbsp;Emiro&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:uzleepito@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;uzleepito@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0pt&nbsp;0pt&nbsp;0pt&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;<br>
&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;problem. &nbsp;If&nbsp;the&nbsp;layout&nbsp;is&nbsp;once&nbsp;set&nbsp;for&nbsp;that&nbsp;particular&nbsp;window, &nbsp;kbdd&nbsp;will<br>
&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;take&nbsp;care&nbsp;of&nbsp;the&nbsp;focus&nbsp;changes&nbsp;and&nbsp;activate&nbsp;the&nbsp;proper&nbsp;layout&nbsp;if&nbsp;the&nbsp;focus&nbsp;moves. &nbsp;All<br>
&nbsp;&nbsp;&lt;br&gt;I&nbsp;want&nbsp;is&nbsp;to&nbsp;set&nbsp;the&nbsp;initial&nbsp;layout&nbsp;to&nbsp;US&nbsp;on&nbsp;the&nbsp;terminal&nbsp;windows&nbsp;and&nbsp;leave&nbsp;the&nbsp;other<br>
&nbsp;&nbsp;&lt;br&gt;layout&nbsp;as&nbsp;the&nbsp;default&nbsp;for&nbsp;all&nbsp;the&nbsp;rest.<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&lt;/div&gt;<br>
&nbsp;&lt;br&gt;<br>
&nbsp;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;<br>
&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;On&nbsp;Tue,&nbsp;Sep&nbsp;1,&nbsp;2015&nbsp;at&nbsp;5:13&nbsp;PM,&nbsp;Ingo&nbsp;Bürk&nbsp;<br>
&nbsp;&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:admin@airblader.de&quot;&nbsp;target=&quot;_blank&quot;&gt;admin@airblader.de&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&nbsp;dir=&quot;ltr&quot;&gt;For_window&nbsp;will&nbsp;only&nbsp;be&nbsp;run&nbsp;when&nbsp;the&nbsp;window&nbsp;is&nbsp;opened,&nbsp;not&nbsp;everytime&nbsp;it&nbsp;is&nbsp;focused.&lt;br&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
