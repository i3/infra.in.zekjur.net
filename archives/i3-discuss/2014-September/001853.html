<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [i3] i3 save/restore bug
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:i3-discuss%40i3.zekjur.net?Subject=Re%3A%20%5Bi3%5D%20i3%20save/restore%20bug&In-Reply-To=%3C85EA6F68AC24DA48B220EBEA7A8C08B81B506FF4%40corpmail01.corp.sensis.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001852.html">
   <LINK REL="Next"  HREF="001855.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[i3] i3 save/restore bug</H1>
    <B>Sargrad, Dave</B> 
    <A HREF="mailto:i3-discuss%40i3.zekjur.net?Subject=Re%3A%20%5Bi3%5D%20i3%20save/restore%20bug&In-Reply-To=%3C85EA6F68AC24DA48B220EBEA7A8C08B81B506FF4%40corpmail01.corp.sensis.com%3E"
       TITLE="[i3] i3 save/restore bug">Dave.Sargrad at saabsensis.com
       </A><BR>
    <I>Tue Sep 16 17:49:52 CEST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="001852.html">[i3] i3 save/restore bug
</A></li>
        <LI>Next message: <A HREF="001855.html">[i3] i3 save/restore bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1853">[ date ]</a>
              <a href="thread.html#1853">[ thread ]</a>
              <a href="subject.html#1853">[ subject ]</a>
              <a href="author.html#1853">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok. I've dug further, and am sure that this is a problem with i3-save-tree.

The containing workspace (container type = &quot;workspace&quot;) has some critical information that is stripped away by i3-save-tree. Specifically the workspace container structure (including the &quot;splitv layout&quot;) is lost as part of the pruning process.

I can provide the entire &quot;tree&quot; associated with the workspace if that would help. But I think perhaps I've given enough detail to understand the issue. 

Please let me know if I should provide additional diagnostics.


-----Original Message-----
From: Sargrad, Dave 
Sent: Tuesday, September 16, 2014 11:09 AM
To: <A HREF="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">i3-discuss at i3.zekjur.net</A>
Subject: i3 save/restore bug

I've found a bug with the i3 save/restore mechanism

In general the save/load works fine (I've tried a number of layouts that work fine), however I have found a simple configuration that fails to save/load correctly. I'm not sure yet if this is a problem with i3, or with i3-save-tree.

I opened three windows in a workspace (and then saved using i3-save-tree --workspace test &gt; /home/ubuntu/.i3/spec)
2 xterms side-by-side in top row
1 emacs in bottom row (I used the mod-shift-k to move emacs down)


Correct Layout (the layout I saved with i3-save-tree) _________________________________________________
|<i>                        |                       |
</I>|<i>                        |                       |
</I>|<i>                        |                       |
</I>|<i>      xterm             |     xterm             |
</I>|<i>                        |                       |
</I>|<i>                        |                       |
</I>|<i>                        |                       |
</I>|<i>                        |                       |
</I>-------------------------------------------------
|<i>                                                |
</I>|<i>                                                |
</I>|<i>                                                |
</I>|<i>                      emacs                     |
</I>|<i>                                                |
</I>|<i>                                                |
</I>|<i>                                                |
</I>|<i>                                                |
</I>_________________________________________________

I then appended using i3-msg (i3-msg &quot;workspace new; append_layout /home/ubuntu/.i3/spec&quot;
After Append Layout (Incorrect Result)
_________________________________________________
|<i>        |         |                             |
</I>|<i>        |         |                             |
</I>|<i>        |         |                             |
</I>|<i> xterm  | xterm   |           emacs             |
</I>|<i>        |         |                             |
</I>|<i>        |         |                             |
</I>|<i>        |         |                             |
</I>|<i>        |         |                             |
</I>|<i>        |         |                             |
</I>|<i>        |         |                             |
</I>|<i>        |         |                             |
</I>_________________________________________________



This is the spec generated by i3-save-tree:


// vim:ts=4:sw=4:et
{
    // splith split container with 2 children
    &quot;border&quot;: &quot;normal&quot;,
    &quot;floating&quot;: &quot;auto_off&quot;,
    &quot;layout&quot;: &quot;splith&quot;,
    &quot;percent&quot;: 0.232604373757455,
    &quot;type&quot;: &quot;con&quot;,
    &quot;nodes&quot;: [
        {
            &quot;border&quot;: &quot;normal&quot;,
            &quot;floating&quot;: &quot;auto_off&quot;,
            &quot;geometry&quot;: {
               &quot;height&quot;: 316,
               &quot;width&quot;: 484,
               &quot;x&quot;: 0,
               &quot;y&quot;: 0
            },
            &quot;name&quot;: &quot;<A HREF="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">ubuntu at sensis-8930</A>: ~&quot;,
            &quot;percent&quot;: 0.5,
            &quot;swallows&quot;: [
               {
               &quot;class&quot;: &quot;^XTerm$&quot;
               }
            ],
            &quot;type&quot;: &quot;con&quot;
        },
        {
            &quot;border&quot;: &quot;normal&quot;,
            &quot;floating&quot;: &quot;auto_off&quot;,
            &quot;geometry&quot;: {
               &quot;height&quot;: 316,
               &quot;width&quot;: 484,
               &quot;x&quot;: 0,
               &quot;y&quot;: 0
            },
            &quot;name&quot;: &quot;<A HREF="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">ubuntu at sensis-8930</A>: ~&quot;,
            &quot;percent&quot;: 0.5,
            &quot;swallows&quot;: [
               {
               &quot;class&quot;: &quot;^XTerm$&quot;
               }
            ],
            &quot;type&quot;: &quot;con&quot;
        }
    ]
}

{
    &quot;border&quot;: &quot;normal&quot;,
    &quot;floating&quot;: &quot;auto_off&quot;,
    &quot;geometry&quot;: {
       &quot;height&quot;: 550,
       &quot;width&quot;: 602,
       &quot;x&quot;: 0,
       &quot;y&quot;: 0
    },
    &quot;name&quot;: &quot;<A HREF="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">emacs at example.com</A>&quot;,
    &quot;percent&quot;: 0.767395626242545,
    &quot;swallows&quot;: [
       {
       &quot;class&quot;: &quot;^Emacs23$&quot;
       }
    ],
    &quot;type&quot;: &quot;con&quot;
}
-
This message is intended only for the addressee and may contain information that is company confidential or privileged.  Any technical data in this message may be exported only in accordance with the U.S. International Traffic in Arms Regulations (22 CFR Parts 120-130) or the Export Administration Regulations (15 CFR Parts 730-774). Unauthorized use is strictly prohibited and may be unlawful. If you are not the intended recipient, or the person responsible for delivering to the intended recipient, you should not read, copy, disclose or otherwise use this message. If you have received this email in error, please delete it, and advise the sender immediately. 
-          
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001852.html">[i3] i3 save/restore bug
</A></li>
	<LI>Next message: <A HREF="001855.html">[i3] i3 save/restore bug
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1853">[ date ]</a>
              <a href="thread.html#1853">[ thread ]</a>
              <a href="subject.html#1853">[ subject ]</a>
              <a href="author.html#1853">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://infra.in.zekjur.net/cgi-bin/mailman/listinfo/i3-discuss">More information about the i3-discuss
mailing list</a><br>
</body></html>
